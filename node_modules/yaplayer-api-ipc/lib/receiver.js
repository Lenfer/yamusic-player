'use strict';

console.info('[Client:IPC:API] Receiver initing...', enviroment);
var ipc = require('ipc');

function initDomApi() {
	console.info('[Client:IPC:API] init DOM API');
	var root = '.bar .player-controls .player-controls__btn';
	var navBar = {
		prev: $(root + '.player-controls__btn_prev'),
		play: $(root + '.player-controls__btn_play'),
		next: $(root + '.player-controls__btn_next')
	};
	console.log(navBar);
	return {
		play: function() {
			navBar.play.click();
		},
		prev: function() {
			navBar.prev.click();
		},
		next: function() {
			navBar.next.click();
		}
	};
}


var api = initDomApi();

/**
 * List of events functions
 * @type {Object}
 */
var events = {
	play: function() {
		api.play();
	},
	next: function() {
		api.next();
	},
	prev: function() {
		api.prev();
	}
};


_.each(events, function(event, key) {
	console.info('api:receiver:%s - mounted', key);
	ipc.on('api:receiver:' + key, event);
});

ipc.send('api:receiver:saveme');

