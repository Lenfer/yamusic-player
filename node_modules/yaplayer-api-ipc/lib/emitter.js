'use strict';

console.info('[Client IPC API] Emitter initing...', enviroment);
var ipc = require('ipc');
var Mu = _muMiniDi.repo;

// emit ipc message on track changed
Mu.player.on('track', function(track) {
	if (track) {
		track.nextTrack = Mu.seq.nextTrack();
		track.prevTrack = Mu.seq.prevTrack();
		ipc.send('api:emitter:track', track);
	}
});


// emit ipc message on progress changed
var ctrlAuto = Mu.player.controlsAuto();
ctrlAuto.on('progress', function(progress) {
	ipc.send('api:emitter:progress', progress);
});
